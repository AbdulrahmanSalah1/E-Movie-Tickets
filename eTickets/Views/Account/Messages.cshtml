@model eTickets.Data.ViewModels.StatusMessagesVM
<style>
    .table-custom th {
        background-color: #343a40;
        color: #fff;
    }

    .table-custom tbody tr:nth-child(odd) {
        background-color: #f8f9fa;
    }

    .table-custom tbody tr:hover {
        background-color: #e9ecef;
    }

    .profile-img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
    }

    .section-title {
        background-color: #343a40;
        color: #fff;
        padding: 10px;
        border-radius: 5px;
    }
</style>

<div class="container my-5">
    <h2 class="text-center mb-4">Messages</h2>

    <!-- Unread Messages -->
    <div class="section-title">Unread Messages</div>
    <div class="table-responsive mt-3">
        <table class="table table-hover table-bordered table-custom">
            <thead>
                <tr>
                    <th scope="col">Profile</th>
                    <th scope="col">Full Name</th>
                    <th scope="col">Email</th>
                    <th scope="col">Message</th>
                    <th scope="col">Date Sent</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.UnreadMessages.Any())
                {
                    @foreach (var message in Model.UnreadMessages)
                    {
                        <tr>
                            <td>
                                @if (!string.IsNullOrEmpty(message.User?.ProfileImageUrl))
                                {
                                    <img src="@message.User.ProfileImageUrl" alt="Profile Picture" class="profile-img">
                                }
                                else
                                {
                                    <i class="profile-img bi bi-person-badge"></i>
                                }
                            </td>
                            <td>@message.FullName</td>
                            <td>@(message.User?.Email ?? "No Email")</td>
                            <td>@message.Message</td>
                            <td>@message.CreatedAt.ToString("g")</td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="5" class="text-center">No unread messages.</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Read Messages -->
    <div class="section-title mt-5">Read Messages</div>
    <div class="table-responsive mt-3">
        <table class="table table-hover table-bordered table-custom">
            <thead>
                <tr>
                    <th scope="col">Profile</th>
                    <th scope="col">Full Name</th>
                    <th scope="col">Email</th>
                    <th scope="col">Message</th>
                    <th scope="col">Date Sent</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.ReadMessages.Any())
                {
                    @foreach (var message in Model.ReadMessages)
                    {
                        <tr>
                            <td>
                                @if (!string.IsNullOrEmpty(message.User?.ProfileImageUrl))
                                {
                                    <img src="@message.User.ProfileImageUrl" alt="Profile Picture" class="profile-img">
                                }
                                else
                                {
                                    <i class="profile-img bi bi-person-badge"></i>
                                }
                            </td>
                            <td>@message.FullName</td>
                            <td>@(message.User?.Email ?? "No Email")</td>
                            <td>@message.Message</td>
                            <td>@message.CreatedAt.ToString("g")</td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="5" class="text-center">No read messages.</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
